# 实时互动能力
```
现有业务的情况下想要增加一个互动模块
支持用户点对点实时聊天、让视频支持弹幕...
![markdown](https://github.com/youngperson/reading/blob/master/%E5%8D%B3%E6%97%B6%E6%B6%88%E6%81%AF%E6%8A%80%E6%9C%AF%E5%89%96%E6%9E%90%E4%B8%8E%E5%AE%9E%E6%88%98/images/ImFunc.png)
```

# 增加即时消息功能
## 消息维度
```
消息存储(内容表)：收发双方看到的消息内容都是一致的
消息ID      消息内容    消息类型    消息产生时间

消息收发通道
第三方辅助通道
```   

## 聊天会话维度
```
消息索引和内容
会话未读计数
```   

## 用户全局维度
```
联系人列表、总未读计数
```

# 问题和解决方案
    1、消息存储中，内容表和索引表要分库分布，用什么字段来哈希？索引表可以和内容表合并成一个表？
    2、能从索引表里面获取到最近联系人所需要的信息，为什么还需要单独的联系人表？