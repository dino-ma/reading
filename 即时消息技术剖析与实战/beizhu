1.杨幂有5KW的粉丝，她发了一条消息，怎么设计

内容表（按照消息ID hash分表）
    消息ID、消息内容、消息类型、消息产生的时间

索引表（按照UID hash分表）   读扩散
    索引的用户UID、索引消息的另一方参与的用户UID、是发件箱还是收件箱、消息ID

离线表(写扩散)？？？
   索引的用户UID、消息ID、版本号     
离线表参考文字中的offline_msgs（同一个UID的多设备，相当于往离线表中插入多条记录）
https://blog.csdn.net/Mailzyw/article/details/54884693


=====这门课的终极挑战（加薪）====>
    设计一个微信的IM，表结构设计、功能的实现流程图和描述、难点的攻克

    列出功能。
        未读：会话未读、总未读
        联系人：最近联系人、所有联系人
        聊天：单聊、群聊
        ....
        

    模拟一下，给5KW人发消息怎么做？？？



在线的、离线的
发完内容后，给当时在线的使用推，当时离线的上线后使用拉
拉的时候带上客户端保存的自增的SID，拉内容表中>sid的内容到索引表里面去
