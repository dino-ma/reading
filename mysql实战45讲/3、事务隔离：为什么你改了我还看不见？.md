# 问题
1. 什么是MySQL事务
2. MySQL事务隔离的实现
3. MySQL事务的隔离级别有哪些
4. MySQL的长事务有哪些风险

# 什么是MySQL事务
- what：事务就是要保证一组数据库操作，要么全部成功，要么全部失败
- where：事务是在innodb引擎层支持的，所以这也是myisam被取代的重要原因
- why：涉及到金钱相关的查询、加减等必须保证是一体的，需要事务

# MySQL事务隔离的实现
- what：处理多个事务同时执行的情况，隔离的越严效率就越低
- how：每条记录在更新的时候都会同时记录一条回滚日志，同一条记录可以存在多个版本(多版本并发控制MVCC)
- when delete rollback log：当系统里没有比这个回滚日志更早的read-view的时候

# MySQL事务的隔离级别有哪些
- what：事务的特点ACID(原子性、一致性、隔离性、持久性)
- 当数据库上有多个事务同时执行的时候，这个时候需要隔离(性能和安全性的权衡)
  - 读未提交：会出现脏读，别人改数据的事务尚未提交，我在我的事务中也能读到
  - 读提交：会出现不可重复读，别人改数据的事务已经提交，我在我的事务中才能读到
  - 可重复读：会出现幻读，别人改数据的事务已经提交，我在我的事务中也不能去读
  - 串行化：我的事务尚未提交，别人就别想改数据(会加上读写锁)

# MySQL的长事务有哪些风险
- waht：在和连接器建立连接的时候使用的长连接，并且开启了事务，这个时候就出现了长事务
- 长事务会导致MVCC中存在很老的事务视图，回滚日志会变得很大
- 长事务还占用锁资源，可能会拖垮整个库
- how do：可以在information_schema库中查innodb_trx这个表中的长事务的执行时间