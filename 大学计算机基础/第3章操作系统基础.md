# 启用一台外部设备(如打印文件)
```
了解设备的启动地址
了解它的命令寄存器
数据寄存器的使用方法
如何发启动命令
如何进行中断处理

这些复杂的问题对用户是影藏的，计算机的操作系统给我们完成了这些事情
```

# 计算机操作系统
```
管家就是操作系统，用户只需要轻点鼠标，轻敲键盘，发出相应的信号或命令
方便了使用者，也充分高效的利用系统资源

操作系统是控制和管理计算机系统内部各种硬件和软件资源、
有效的组织多道程序运行系统软件或程序的集合，同时提供用户接口，
使用户获得良好的工作环境。

面向两个用户：
面向硬件系统：
    操作系统需要处理诸如：管理与配置内存、决定系统资源供需的优先次序、
    控制输入与输出设备，操作网络与管理文件系统等基本事务
面向用户：
    操作系统则提供了用户接口，能接受并处理用户的指令，类似于洗衣机上的面板，按下按钮就有相应的反应
```

## 操作系统发展的四个阶段
```
手工操作阶段
    从20世纪40年代末到50年代中期，这时计算机主要元件是电子管。
    手工的方式使用计算机解决问题：
        把程序纸带装上输入机
        把程序和数据输入计算机
        启动程序运行
        运算结束后，用户拿走打印结果，取下纸带
    缺点：软件只用机器语言，无操作系统，手工操作、系统资源利用率低。    

批处理系统
    解决人-机矛盾，把零散的单一程序处理，变为集中的成批程序处理的方式
    能够支持CPU与外部设备并行操作的“批处理”操作系统由此产生

操作系统的形成
    通道技术、缓冲技术、中断技术
    批处理操作系统和分时操作系统、实时操作系统
    标志着操作系统正式形成

现代操作系统
    计算机由单处理机改进为多处理机系统时，有了多处理操作系统和并行操作系统
    随着计算机网络的出现和发展，出现了分布式操作系统和网络操作操作系统
    随着信息家电的发展，又出现了嵌入式操作系统
    现代操作系统提供多用户、多任务的运行环境，它的核心是具备支持多个程序同时运行的机制，操作系统向着具备多任务并发和资源共享特征的方向发展
```

## 为什么资源需要管理
```
大家都会需要用到输入设备输入程序和数据、用CPU处理任务、用存储器存储结果，面临着一碗粥多个人喝，怎么喝的问题
因为是多用户共享资源，资源的使用和分配就需要进行管理
解决系统资源共享、协调多个活动之间相互制约关系的方法、策略和机制

管理的目的：保证资源的高利用率，在合理时间内使所有用户获得所需资源的机会，
对不可共享的资源实施互斥使用，防止由资源分配不当而引起的死锁

常见策略：
    先请求先服务：没有考虑到任务的轻重缓急
    优先调度：给老弱病残让座
```

## 处理机(CPU)管理
```
进程：进程就是执行中的程序
程序之间相互制约的关系：
    有时候某程序需要等待某种资源，有时候又可能要等待某些信息而暂时运行不下去
    只能处于暂停状态，而当使之暂停的因素消失后，程序有可以恢复执行。

处理机（CPU）相当于人类的大脑；
处理机是单入口资源，任何时刻只能有一个任务得到控制权使用CPU，所有多用户多任务只能互斥的使用处理机

处理机分配的策略问题
    分片的方式？
        1、大家平等分
        将处理机时间划分为时间片（很短，如几百毫秒），每个进程被调度时分得一个时间片，
        当这个时间片用完，进程有完成以及进程未完成两种状态。如果时间片到，进程完成，则让出
        处理机使用权；如果时间片用完时，进程还未完成，仍需将处理机使用权让出，转为就绪状态并
        进入就绪队列末端排队等待下一次时间片轮转到。
        2、按照进程的优先级来排队，依次占用CPU
        
    时间片的长短？
    分配给谁？
    多长时间？
    谁先占用，谁后占用？
```

## 主存管理
```
帕金森定律：你给程序再多内存，程序也会想尽办法耗光
程序希望获取无限多的主存资源，可实际的主存容量是有限的，需要合理配置加以管理

存储管理的功能主要是映射逻辑地址到物理主存地址、进行主存分配、对各用户区的信息提供保护以及扩充逻辑主存区

主存映射：程序执行时需要从主存中存取指令和数据，程序所需要的指令和数据实际是存储在主存的物理单元中的
        使用逻辑地址转换实际的物理单元

主存区域的划分方式：
    一种是将主存划分成大小不等的区域，可以一个区域存放一个程序
    第二种是将主存划分为一系列大小相等的块，将程序空间的地址分页后放入不同的主存快里，需要若干块一起来存放一个程序
    如果主存中没有可用的空闲区时（主存不够用事），需要将主存中暂时用不到的程序和数据调出到外存，
    从而将急需使用的程序和数据调入到内存中。这就要决定哪些信息可以从主存中移走，淘汰策略

主存的淘汰策略：
    先进先出：总是选择最早进入内存的信息淘汰
    最不经常使用：将最近应用次数最少的信息淘汰
    最佳算法：淘汰掉信息是以后再也不会使用的信息

主存保护：
    给用户程序分配的地址空间，只能在这个范围内的空间被访问。（比如会和上下界寄存器中的地址比较）
    对不同用户程序的主存区域如何保护
    通常的保护手段有上下界防护、存储键防护与环状防护。
    上下界防护：硬件为用户所分配的每一个连续的主存空间设置一对上、下界寄存器，分别指向该存储空间的上界与下界。
    键式保护：由操作系统为每个主存页面规定存储键，存取主存操作带有访问键，当两键符合时才允许指向操作，从而保护别的程序区域不被侵犯
    环状保护：把系统程序和用户程序按重要性分层，称为环，对每个环都归到访问它的级别，违反规定的存取操作是非法的，以此实现对正在执行的程序的保护
```

## 设备管理
```
设备管理又叫输入输出管理（I/O管理），它是操作系统中最庞杂、琐碎的部分，很难规则化。
原因是计算机系统可配置使用各种各样、范围非常广泛的外部设备。

设备管理的宗旨就是要为I/O系统建立一种结构，要求该结构中与具体设备有关的特性尽可能的分离出来，
为用户提供一个逻辑的，使用方便的设备。
```

## 文件管理
```
计算机要处理的信息都存放在存储介质里，用户存取信息得首先安排或知道存放位置，
组织相应的的输入输出指令，这是很复杂繁琐的。尤其用在多任务的系统里，用户的信息
存放位置更难以确定，信息的安全性也要求其他用户不可随意访问存储介质里不属于该用户
的信息，因此，现代操作系统就提供了“文件系统”对信息进行存取和管理。所有用户使用同一的方式去
存取文件，列如搭建目前通常对文件是按照名字进行存储的，俗称为“按名存取”
``