# 启用一台外部设备(如打印文件)
```
了解设备的启动地址
了解它的命令寄存器
数据寄存器的使用方法
如何发启动命令
如何进行中断处理

这些复杂的问题对用户是影藏的，计算机的操作系统给我们完成了这些事情
```

# 计算机操作系统
```
管家就是操作系统，用户只需要轻点鼠标，轻敲键盘，发出相应的信号或命令
方便了使用者，也充分高效的利用系统资源

操作系统是控制和管理计算机系统内部各种硬件和软件资源、
有效的组织多道程序运行系统软件或程序的集合，同时提供用户接口，
使用户获得良好的工作环境。

面向两个用户：
面向硬件系统：
    操作系统需要处理诸如：管理与配置内存、决定系统资源供需的优先次序、
    控制输入与输出设备，操作网络与管理文件系统等基本事务
面向用户：
    操作系统则提供了用户接口，能接受并处理用户的指令，类似于洗衣机上的面板，按下按钮就有相应的反应
```

## 操作系统发展的四个阶段
```
手工操作阶段
    从20世纪40年代末到50年代中期，这时计算机主要元件是电子管。
    手工的方式使用计算机解决问题：
        把程序纸带装上输入机
        把程序和数据输入计算机
        启动程序运行
        运算结束后，用户拿走打印结果，取下纸带
    缺点：软件只用机器语言，无操作系统，手工操作、系统资源利用率低。    

批处理系统
    解决人-机矛盾，把零散的单一程序处理，变为集中的成批程序处理的方式
    能够支持CPU与外部设备并行操作的“批处理”操作系统由此产生

操作系统的形成
    通道技术、缓冲技术、中断技术
    批处理操作系统和分时操作系统、实时操作系统
    标志着操作系统正式形成

现代操作系统
    计算机由单处理机改进为多处理机系统时，有了多处理操作系统和并行操作系统
    随着计算机网络的出现和发展，出现了分布式操作系统和网络操作操作系统
    随着信息家电的发展，又出现了嵌入式操作系统
    现代操作系统提供多用户、多任务的运行环境，它的核心是具备支持多个程序同时运行的机制，操作系统向着具备多任务并发和资源共享特征的方向发展
```

## 为什么资源需要管理
```
大家都会需要用到输入设备输入程序和数据、用CPU处理任务、用存储器存储结果，面临着一碗粥多个人喝，怎么喝的问题
因为是多用户共享资源，资源的使用和分配就需要进行管理
解决系统资源共享、协调多个活动之间相互制约关系的方法、策略和机制

管理的目的：保证资源的高利用率，在合理时间内使所有用户获得所需资源的机会，
对不可共享的资源实施互斥使用，防止由资源分配不当而引起的死锁

常见策略：
    先请求先服务：没有考虑到任务的轻重缓急
    优先调度：给老弱病残让座
```

## 处理机(CPU)管理
```
进程：进程就是执行中的程序
程序之间相互制约的关系：
    有时候某程序需要等待某种资源，有时候又可能要等待某些信息而暂时运行不下去
    只能处于暂停状态，而当使之暂停的因素消失后，程序有可以恢复执行。

处理机（CPU）相当于人类的大脑；
处理机是单入口资源，任何时刻只能有一个任务得到控制权使用CPU，所有多用户多任务只能互斥的使用处理机

处理机分配的策略问题
    分片的方式？
        1、大家平等分
        将处理机时间划分为时间片（很短，如几百毫秒），每个进程被调度时分得一个时间片，
        当这个时间片用完，进程有完成以及进程未完成两种状态。如果时间片到，进程完成，则让出
        处理机使用权；如果时间片用完时，进程还未完成，仍需将处理机使用权让出，转为就绪状态并
        进入就绪队列末端排队等待下一次时间片轮转到。
        2、按照进程的优先级来排队，依次占用CPU
        
    时间片的长短？
    分配给谁？
    多长时间？
    谁先占用，谁后占用？
```

## 主存管理
```
帕金森定律：你给程序再多内存，程序也会想尽办法耗光
程序希望获取无限多的主存资源，可实际的主存容量是有限的，需要合理配置加以管理

存储管理的功能主要是映射逻辑地址到物理主存地址、进行主存分配、对各用户区的信息提供保护以及扩充逻辑主存区

主存映射：程序执行时需要从主存中存取指令和数据，程序所需要的指令和数据实际是存储在主存的物理单元中的
        使用逻辑地址转换实际的物理单元

主存区域的划分方式：
    一种是将主存划分成大小不等的区域，可以一个区域存放一个程序
    第二种是将主存划分为一系列大小相等的块，将程序空间的地址分页后放入不同的主存快里，需要若干块一起来存放一个程序
    如果主存中没有可用的空闲区时（主存不够用事），需要将主存中暂时用不到的程序和数据调出到外存，
    从而将急需使用的程序和数据调入到内存中。这就要决定哪些信息可以从主存中移走，淘汰策略

主存的淘汰策略：
    先进先出：总是选择最早进入内存的信息淘汰
    最不经常使用：将最近应用次数最少的信息淘汰
    最佳算法：淘汰掉信息是以后再也不会使用的信息

主存保护：
    给用户程序分配的地址空间，只能在这个范围内的空间被访问。（比如会和上下界寄存器中的地址比较）
    对不同用户程序的主存区域如何保护
    通常的保护手段有上下界防护、存储键防护与环状防护。
    上下界防护：硬件为用户所分配的每一个连续的主存空间设置一对上、下界寄存器，分别指向该存储空间的上界与下界。
    键式保护：由操作系统为每个主存页面规定存储键，存取主存操作带有访问键，当两键符合时才允许指向操作，从而保护别的程序区域不被侵犯
    环状保护：把系统程序和用户程序按重要性分层，称为环，对每个环都归到访问它的级别，违反规定的存取操作是非法的，以此实现对正在执行的程序的保护
```

## 设备管理
```
设备管理又叫输入输出管理（I/O管理），它是操作系统中最庞杂、琐碎的部分，很难规则化。
原因是计算机系统可配置使用各种各样、范围非常广泛的外部设备。

设备管理的宗旨就是要为I/O系统建立一种结构，要求该结构中与具体设备有关的特性尽可能的分离出来，
为用户提供一个逻辑的，使用方便的设备。
```

## 文件管理
```
计算机要处理的信息都存放在存储介质里，用户存取信息得首先安排或知道存放位置，
组织相应的的输入输出指令，这是很复杂繁琐的。尤其用在多任务的系统里，用户的信息
存放位置更难以确定，信息的安全性也要求其他用户不可随意访问存储介质里不属于该用户
的信息，因此，现代操作系统就提供了“文件系统”对信息进行存取和管理。所有用户使用同一的方式去
存取文件，列如搭建目前通常对文件是按照名字进行存储的，俗称为“按名存取”
```

## 从用户的角度看操作系统
```
对于用户来说，与操作系统最直接的接触在两个方面
一是操作系统所提供的用户界面（接口）
二是文件系统

用户界面
    键盘命令
    作业控制语言
    图形化用户界面
        菜单驱动：为了解决命令难以记忆的问题
        图标驱动方式：代表操作系统中的命令、系统服务、操作功能、各种资源等
        图形用户界面(GUI)：将菜单驱动、图标驱动、面向对象技术集成在一起
                         形成一个图文并茂的视窗操作系统

文件系统
    操作系统用于存取，管理信息的机构
    文件系统提供了用户和辅存（外部存储介质）的接口
    文件是在逻辑上具有完整意义的信息集合，有一个名字以供标识。无论用户是在进行文档编辑
    还是表格处理亦或程序设计，都是对以文件为单位的信息进行操作

文件分类
    系统文件：这些文件只能通过系统调用给用户服务
    程序文件：由标准子程序以及常用的应用程序所组成的文件。这类文件用户可以调用但不能修改
    用户文件：是用户委托文件系统保存的文件，用户对其有所有操作权限。如源程序、目标程序、原始数据、计算结果等组成的文件。

文件的操作权限
    只读文件
    读写文件
    执行文件

文件中的数据形式
    文本文件
    目标文件
    可执行文件

文件按信息的流向
    输入文件
    输出文件
    输入输出文件(如磁盘文件)

文件名
    通常我们看到文件名字，就能知道该文件的一些信息
    扩展名也称为后缀，利用它可以区分文件的属性

目录
    当存储在磁盘中的文件越来越多，如何组织文件才能让用户存取方便，是文件系统必须解决的问题。
    使用目录结构来管理文件 

路径名
    从根目录到末端的数据文件之间只有一条唯一的路径，这样利用路径名就可以唯一表示一个文件（很好的解决了重名的问题）
    有绝对路径名和相对路径名两种表示
    相对路径从当前目录开始，路径更短。检索起来会快一些
```

## 文件的操作
```
用户可以创建一个新的文件、删除一个旧文件、对指定的文件进行打开、关闭、保存、读、写、执行等操作
也可以查看文件的属性（关于文件大小，位置，建立或修改时间等信息）
```

## 文件共享与保护
```
文件共享是允许多个用户或程序同时使用一个文件。利用文件共享功能可以节省大量外存与内存空间
因为系统只需要保存共享文件的一个副部
```

## 文件保护
```
实际上有两层含义：文件保护和文件保密
文件保护是指避免因有意或无意的误操作使文件受到破坏
文件保密是指未经授权不能访问文件。这两个问题都涉及用户对文件的访问权限控制
```

## 操作系统分类
```
根据工作方式分为
    批处理操作系统
        单道系统和多道系统
        
        单道是指一次只有一个作业进入主存运行。作业是系统中每个用户提交的任务，是一个处理单位
        一道作业在处理中又可以分为多个并发的活动单位(进程)
        
        多道是指内存中存放多个作业。用户将作业交给系统操作员，系统操作员将许多用户的作业组成一批作业，输入到计算机中
        系统根据主存和其它资源情况，把满足资源条件且符合调度原则的几个作业调入内存，让其交替运行

    分时操作系统
        同时性、独立性。及时性、交互性。UNIX是常见的分时操作系统

        采用了分时技术，它的主要特点是：同时性、共享时间。它采样时间片轮转方式处理每个用户提出的服务请求（想象一下摩天轮）
        并以交互方式在终端上向用户显示结果

        操作系统把CPU时间分为一个一个的时间片，轮流把时间片分给每个并发程序，每道程序一次只运行一个时间片，时间片到，操作系统就把时间片分给另一道程序。
        计算机为多个终端用户服务，每个用户却感觉好像有一台专用的计算机为自己服务一样。
        若干终端用户同时使用计算机却又彼此独立，互不干扰，用户请求也能在较短时间内得到响应。
        用户可以进行人机对话，以交互方式工作（不像批处理系统，作业一旦提交，需要运行完毕才能根据情况作出修改）

    实时操作系统
        实时控制系统和实时处理系统的统称
        
        要确保在任何时候，甚至满载的时候都能及时响应，因此设计实时操作系统的时候
        首先要考虑响应及时，其次才考虑资源的利用率。一般要求秒级、毫秒级甚至微秒级的响应时间。如卫星发射

        实时控制系统实质上是过程控制系统，通过传感器或特殊的外围设备获取被控制对象产生的信息（如温度、压力、流量等的变化）
        然后对获得的信号进行处理、分析，做出决策，激发一个行为。以达到控制的目的（如对飞行器、导弹发射的自动控制）

        实时处理系统主要是对信息进行及时的处理。如计算机预定飞机票、查阅文献
        
        在生产生活中，实时系统的应用有监督产品线、控制流水线生产的连续过程、监督病人的各项生理指标、监督和控制交替等系统
    
    网络操作系统
    分布式操作系统

根据架构
    单内核操作系统
    微内核操作系统

根据运行的环境
    桌面操作系统
    嵌入式操作系统

根据指令的长度
    8BIT、16BIT、32BIT、64BIT

事实上，并不是只有PC机才用到了操作系统，小到手机、大到航母、卫星、飞机、长征7号火箭都有操作系统。
```

## 理论方面
```
我们要知道操作系统需要支持多用户多任务的并行执行，
因此就要解决计算机系统中各种资源共享与互斥访问的方法策略
要协同不同用户多个活动之间相互制约的机制
```

# 章节测试

1.操作系统是一种(  A  )。
A、系统软件
B、系统硬件
C、应用软件
D、支援软件

2.操作系统目的是提供一个供其他程序执行的良好环境，因此它必须使计算机(　D　)。
A、使用方便
B、高效工作
C、合理使用资源
D、使用方便并高效工作

3.对文件进行读写前，要先打开文件(  A  )。
A、正确     B、错误

4.有了操作系统，用户可以更方便高效的使用计算机(  A  )。
A、正确     B、错误
